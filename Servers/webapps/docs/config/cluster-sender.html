<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="../images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 8 Configuration Reference (8.0.36) - The Cluster Sender object</title><meta name="author" content="Filip Hanik"><script type="application/javascript" data-comments-identifier="tomcat-8.0-doc/config/cluster-sender">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "http://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script></head><body><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="http://tomcat.apache.org/"><img alt="Tomcat Home" src="../images/tomcat.png"></a></div><div style="height: 1px;"></div><div class="asfLogo noPrint"><a href="http://www.apache.org/" target="_blank"><img src="../images/asf-feather.png" alt="The Apache Software Foundation" style="width: 266px; height: 83px;"></a></div><h1>Apache Tomcat 8 Configuration Reference</h1><div class="versionInfo">
          Version 8.0.36,
          <time datetime="2016-06-09">Jun 9 2016</time></div><div style="height: 1px;"></div><div style="clear: left;"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>Links</h2><ul><li><a href="../index.html">Docs Home</a></li><li><a href="index.html">Config Ref. Home</a></li><li><a href="http://wiki.apache.org/tomcat/FAQ">FAQ</a></li><li><a href="#comments_section">User Comments</a></li></ul></div><div><h2>Top Level Elements</h2><ul><li><a href="server.html">Server</a></li><li><a href="service.html">Service</a></li></ul></div><div><h2>Executors</h2><ul><li><a href="executor.html">Executor</a></li></ul></div><div><h2>Connectors</h2><ul><li><a href="http.html">HTTP</a></li><li><a href="ajp.html">AJP</a></li></ul></div><div><h2>Containers</h2><ul><li><a href="context.html">Context</a></li><li><a href="engine.html">Engine</a></li><li><a href="host.html">Host</a></li><li><a href="cluster.html">Cluster</a></li></ul></div><div><h2>Nested Components</h2><ul><li><a href="cookie-processor.html">CookieProcessor</a></li><li><a href="credentialhandler.html">CredentialHandler</a></li><li><a href="globalresources.html">Global Resources</a></li><li><a href="jar-scanner.html">JarScanner</a></li><li><a href="jar-scan-filter.html">JarScanFilter</a></li><li><a href="listeners.html">Listeners</a></li><li><a href="loader.html">Loader</a></li><li><a href="manager.html">Manager</a></li><li><a href="realm.html">Realm</a></li><li><a href="resources.html">Resources</a></li><li><a href="sessionidgenerator.html">SessionIdGenerator</a></li><li><a href="valve.html">Valve</a></li></ul></div><div><h2>Cluster Elements</h2><ul><li><a href="cluster.html">Cluster</a></li><li><a href="cluster-manager.html">Manager</a></li><li><a href="cluster-channel.html">Channel</a></li><li><a href="cluster-membership.html">Channel/Membership</a></li><li><a href="cluster-sender.html">Channel/Sender</a></li><li><a href="cluster-receiver.html">Channel/Receiver</a></li><li><a href="cluster-interceptor.html">Channel/Interceptor</a></li><li><a href="cluster-valve.html">Valve</a></li><li><a href="cluster-deployer.html">Deployer</a></li><li><a href="cluster-listener.html">ClusterListener</a></li></ul></div><div><h2>web.xml</h2><ul><li><a href="filter.html">Filter</a></li></ul></div><div><h2>Other</h2><ul><li><a href="systemprops.html">System properties</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>The Cluster Sender object</h2><h3 id="Table_of_Contents">Table of Contents</h3><div class="text">
<ul><li><a href="#Introduction">Introduction</a></li><li><a href="#Concurrent_Parallel_Delivery">Concurrent Parallel Delivery</a></li><li><a href="#Nested_Elements">Nested Elements</a></li><li><a href="#Attributes">Attributes</a><ol><li><a href="#Common_Sender_Attributes">Common Sender Attributes</a></li><li><a href="#Common_Transport_Attributes">Common Transport Attributes</a></li><li><a href="#Common_PooledSender_Attributes">Common PooledSender Attributes</a></li></ol></li></ul>
</div><h3 id="Introduction">Introduction</h3><div class="text">
  <p>
  The channel sender component is responsible for delivering outgoing cluster messages over the network.
  In the default implementation, <code>org.apache.catalina.tribes.transport.ReplicationTransmitter</code>,
  the sender is a fairly empty shell with not much logic around a fairly complex <code>&lt;Transport&gt;</code>
  component the implements the actual delivery mechanism.
  </p>
</div><h3 id="Concurrent_Parallel_Delivery">Concurrent Parallel Delivery</h3><div class="text">
  <p>
  In the default <code>transport</code> implementation, <code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code>,
  Apache Tribes implements what we like to call "Concurrent Parallel Delivery".
  This means that we can send a message to more than one destination at the same time(parallel), and
  deliver two messages to the same destination at the same time(concurrent). Combine these two and we have
  "Concurrent Parallel Delivery".
  </p>
  <p>
  When is this useful? The simplest example we can think of is when part of your code is sending a 10MB message,
  like a war file being deployed, and you need to push through a small 10KB message, say a session being replicated,
  you don't have to wait for the 10MB message to finish, as a separate thread will push in the small message
  transmission at the same time. Currently there is no interrupt, pause or priority mechanism available, but check back soon.
  </p>
</div><h3 id="Nested_Elements">Nested Elements</h3><div class="text">
 <p>
   The nested element <code>&lt;Transport&gt;</code> is not required, but encouraged, as this is where
   you would set all the socket options for the outgoing messages. Please see its attributes below.
   There are two implementations, in a similar manner to the <a href="cluster-receiver.html">receiver</a>, one is non-blocking
   based and the other is built using blocking IO. <br>
   <code>org.apache.catalina.tribes.transport.bio.PooledMultiSender</code> is the blocking implementation and
   <code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code>.
   Parallel delivery is not available for the blocking implementation due to the fact that it is blocking a thread on sending data.
 </p>
</div><h3 id="Attributes">Attributes</h3><div class="text">
  <div class="subsection"><h4 id="Common_Sender_Attributes">Common Sender Attributes</h4><div class="text">
    <table class="defaultTable"><tr><th style="width: 15%;">
          Attribute
        </th><th style="width: 85%;">
          Description
        </th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
        Required, only available implementation is <code>org.apache.catalina.tribes.transport.ReplicationTransmitter</code>
      </td></tr></table>
  </div></div>
  <div class="subsection"><h4 id="Common_Transport_Attributes">Common Transport Attributes</h4><div class="text">
    <table class="defaultTable"><tr><th style="width: 15%;">
          Attribute
        </th><th style="width: 85%;">
          Description
        </th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
        Required, an implementation of the <code>org.apache.catalina.tribes.transport.MultiPointSender</code>.<br>
        Non-blocking implementation is <code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code><br>
        Blocking implementation is <code>org.apache.catalina.tribes.transport.bio.PooledMultiSender</code>
      </td></tr><tr><td><code class="attributeName">rxBufSize</code></td><td>
        The receive buffer size on the socket.
        Default value is <code>25188</code> bytes.
      </td></tr><tr><td><code class="attributeName">txBufSize</code></td><td>
       The send buffer size on the socket.
       Default value is <code>43800</code> bytes.
      </td></tr><tr><td><code class="attributeName">udpRxBufSize</code></td><td>
        The receive buffer size on the datagram socket.
        Default value is <code>25188</code> bytes.
      </td></tr><tr><td><code class="attributeName">udpTxBufSize</code></td><td>
       The send buffer size on the datagram socket.
       Default value is <code>43800</code> bytes.
      </td></tr><tr><td><code class="attributeName">directBuffer</code></td><td>
       Possible values are <code>true</code> or <code>false</code>.
       Set to true if you want the receiver to use direct bytebuffers when writing data
       to the sockets. Default value is <code>false</code>
      </td></tr><tr><td><code class="attributeName">keepAliveCount</code></td><td>
       The number of requests that can go through the socket before the socket is closed, and reopened
       for the next request. The default value is <code>-1</code>, which is unlimited.
      </td></tr><tr><td><code class="attributeName">keepAliveTime</code></td><td>
       The number of milliseconds a connection is kept open after its been opened.
       The default value is <code>-1</code>, which is unlimited.
      </td></tr><tr><td><code class="attributeName">timeout</code></td><td>
        Sets the SO_TIMEOUT option on the socket. The value is in milliseconds and the default value is <code>3000</code>
        milliseconds.(3 seconds) This timeout starts when a message send attempt is starting, until the transfer has been completed.
        For the NIO sockets, this will mean, that the caller can guarantee that we will not attempt sending the message
        longer than this timeout value. For the blocking IO implementation, this translated directly to the soTimeout.<br>
        A timeout will not spawn a retry attempt, in order to guarantee the return of the application thread.
      </td></tr><tr><td><code class="attributeName">maxRetryAttempts</code></td><td>
        How many times do we retry a failed message, that received a IOException at the socket level.
        The default value is <code>1</code>, meaning we will retry a message that has failed once.
        In other words, we will attempt a message send no more than twice. One is the original send, and one is the
        <code>maxRetryAttempts</code>.
      </td></tr><tr><td><code class="attributeName">ooBInline</code></td><td>
        Boolean value for the socket OOBINLINE option. Possible values are <code>true</code> or <code>false</code>.
      </td></tr><tr><td><code class="attributeName">soKeepAlive</code></td><td>
        Boolean value for the socket SO_KEEPALIVE option. Possible values are <code>true</code> or <code>false</code>.
      </td></tr><tr><td><code class="attributeName">soLingerOnAí=ĞG=û_Ç‚VÔmlyóÕbøµÓp”¢"a3‘t$_c•daƒÉj²UÅ?Ñ|[\BÚh¶ªâW¦°p	ğ®Ku _GÀÖšH­
ÅË Q9B1Sc$
@)–i Éø ù@ì‰ñEÁMÖAY´ZHÌÌ¨¦n¬w×‚9ô®Ué15cLÓ)‰¾öYOiF¨·}…ÿ<n±­8ĞŠV4¹i 3ò'²jJE¢ÈXäæ·’A7¥xS%	[íÕ+ƒJ§ÓşÕpºâV³—)¹ºC’§h…OÑk~¬BÈ ^B¬ò÷9¯KöOµ
æuğQñDi¡×|ª #Cá‘±"‘šW3ÆUÄ©j%ÂD…§‰EñˆÁ7ÏvwËÛ®sÅ†ã»áÔ/÷ay ~NÂûĞ}¤ß¾k‹¯á­íÊ’ÁtÌöğ'ÙSfÁ-ÄÀƒy´ÑÑ
tGóîLıÂ&å£–¡ÁãXAHUûÔ™{[‚ñ8[¤Á†	D­´Ó«ğø_é:poR¹ıÈ;dÏ-(\2-A•v³ÙnIËëÛiµí·mŞ^Ë½>’ší«ùÍm€qãª+Ì?Htqéz«Ò©5k­Õø¡Õf;rš-b:xû¡S3‰ª†Å«¡ôTíHítÏ»º½Zó±†±ÁÅ~øïœø•×˜¥Ÿ«D+Á—ëîZğ¹bµ >nx|n%\G‹*ÙBÊOÖ”ÅU‹|^ki#Á#2 ™F#œ˜’&el&I	;ÒwÏñz¯øf	‘u”IÑ‘³bgÌ6Z±|Gü<3#_26èw\†·ÕTÈ„Î8ÍXÍ§²©êë·b{ªG›tlì cB'R’óu1¢¿ ¤ÎÜî¼«Öc¥Y¼jæÁdæ´&Q€>Åª6ÿHÚÂ€¯öƒhğrD¢ìØ:SølÈŒ[x†ÌğÙ÷&™á³’YôÂÆS^Ñ]­hŠÂ[Âã\cHAP_ş7İ=	8Æl'd;ÿdq"
Vïjâ‹Óæa6ˆÉGôdùzä•F#U^|o´+JbræÓM¤§í&ˆà/^  øŸÉ0òô	˜}ã¼ZëmÕõl—Âårƒe¥\’Cí†>Ûã=®\õuÛ}#²İ7R†í¤ŒÙD›ˆ+Z^Fşõ5ÛYpg´P Åù’
`QÑúâ¢‰ºuRúw»SşíµıC~êaûvõ:–œÿÚuŒÿ·[Şÿÿï/yv6ŸÅ˜m>—0@z`ºuõ™|€Öó8SçäÌ6©4>ëø‹bÏâ	pÁ <Ÿ/0Èg`€³Ì˜_Ê¬s©×lĞ­u. ÕƒS¹‚WÊ7·3R¿şj0°ÎŞ×ŞÖ[ W]ü6{œÚ‘_‡ˆÑ±0h2¶o¿rj¡÷cø»8t†7üÒ­ÿdÕn£Öúõ0™ß&³4› WµÃQà­‘²Wµì<
4ŞÀK7­G™ÿ÷¼ÖùõÆï¤ş¶·#Ğ	*‘M&£5è¼;¡„3Q7¿xÖ˜{ v$)7e;ã;<èµ†ªÛ¤ÑÑ‡C.ïÇa¦)n·ˆ¿Ï«VcPŸù¾›ºyYôyªºI{¾ACdÊÛéeŠ©Mµáa?µFñY».İôÍ¢Cfà]›;\RA}-=În—ÇÕUpêy«”Ï1Ñ¬í$/êl†«lúÌ×YG}”Ø0<÷*wDÅ²©Pô‰ÌK\Õ|wQÃD–…­y
ì¼Şê±y3¼YÚ8¢æ“^FplUŞ±kO ‘×¯ ®Ñ„	yUÎ(Ä¸¹âlìÄ¹¼ê%Ä³:!Ê2î´ªœT~Ú€§F›«Î8TÌÔ ãF¼ğ©ßÕ9sâÀv67YÕví¬K°ñü|©šùS~Æ[to true, the sender will Ú8¢æ“ a <code>org.apache.catalina.tribes.RemoteProcessExceptionR†í¤ŒÙD›ˆ+Z^Fwhen we receive a negative ack from the remote member.
       Set to a?µFñ, and Tribes will Úreat a positive ack the same way as a negative ack, that the message was received]ü6{œÚ‘_‡ˆÑ±0h2/table>
  </div></div>
  <div class="subsection"><h4 id="Common_PooledSender_Attributes">Common PooledSender Attributes</h4><div class="text">
    <table class="defaultTable"><tr><th style="width: 15%;">
          Attribute
        </th><th style="width: 85%;">
          Description
        </th></tr><tr><td><ô‰ÌK\Õ|wQÃD–…­y
ì¼Şê±y3¼YpoolSize</code></td><td>
        The maximum number of concurrent connections from A to B–¡ÁãXAHUûÔ™{[d;ÿdq"
Vïjased on a per-destination count–¡ÁãXAHUûÔ™{[‚ñ8[¤Á†	D­´Ó«ğø_é:po25$/êl†«lúÌ×YG}”Ø0<÷*wDÅ²©Pô‰ÌK\Õ|wQÃD–…­y
ì¼Şê±y3¼YmaxWait</code></td><td>
        The maximum number of milliseconds that the senderPool will wait when
        there are no available senders. The default value is <code>3000</code>
        milliseconds.(3 seconds)]ü6{œÚ‘_‡ˆÑ±0h2/table>
  </div></div>
</div><div class="noprint"><h3 id="comments_section">
                  Comments
                </h3><div class="text"><p class="notice"><strong>Notice: </strong>This comments section collects your suggestions
                    on improving documentation ¼;¡Apache Tomcat.<br><br>
                    If you have trouble and need help, read
                    <a href="http://tomcat.apache.org/‰ºudhelp.html">Find Help W page
                    and ask your question on the tomcat-:rs
                    <a href="http://tomcat.apache.org/lists.html">mailing list W]ü6{œÚ‘_______________Do not ask such questions here. This is not a Q&amp;A section.<br><br>
                    The Apache Comments System is explaºuRúw<a href="../comments.html">here W]ü6{œÚ‘_______________Comments may be removed by our moderators if they are eitherü6{œÚ‘_______________implemented or considerRúw»Svalid/off-topic]ü6{œÚ‘_____________</p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">
    Copyright &copy; 1999-2016, The Apache Software Foundation
  </div></footer></div></body></html>